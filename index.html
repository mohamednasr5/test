<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØµÙˆÙŠØª</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
/* --- Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª (CSS) --- */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: "Cairo", "Segoe UI", Tahoma, sans-serif; }
body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; color: #fff; overflow-x: hidden; }
.hidden { display: none !important; }

/* Ø´Ø§Ø´Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± */
#password-modal { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(8px); display: flex; justify-content: center; align-items: center; z-index: 9999; }
.pass-box { width: 95%; max-width: 400px; background: #fff; color: #222; padding: 35px 18px; border-radius: 18px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4); text-align: center; animation: pop 0.4s ease; }
@keyframes pop { from { transform: scale(0.6); opacity: 0.2; } to { transform: scale(1); opacity: 1; } }
.pass-title { font-size: 1.6em; font-weight: 900; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
.pass-input { width: 100%; padding: 14px; margin-top: 20px; text-align: center; border-radius: 12px; border: 2px solid #e0e7ff; background: #f8f9ff; font-size: 1.1em; }
.pass-btn { margin-top: 20px; width: 100%; padding: 13px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; }
.pass-err { margin-top: 12px; padding: 10px; color: #c62828; background: #ffebee; border-radius: 8px; display: none; }

/* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
.container { width: 100%; max-width: 420px; background: #fff; color: #222; padding: 26px; border-radius: 20px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); animation: fade 0.5s ease; }
@keyframes fade { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
h2 { text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 2em; font-weight: 900; margin-bottom: 10px; }

.committee-info { text-align: center; margin: 12px 0 25px; background: linear-gradient(135deg, #f5f7ff 0%, #eff2ff 100%); padding: 12px; border-radius: 12px; border-left: 4px solid #667eea; }
.committee-name { font-size: 1.06em; font-weight: 700; color: #667eea; margin-bottom: 4px; }
.committee-address { font-size: 0.88em; color: #666; font-weight: 500; }

/* Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ */
label { font-weight: 700; color: #333; margin-top: 16px; display: block; }
input[type="text"] { width: 100%; padding: 13px 12px; border-radius: 12px; border: 2px solid #e0e7ff; background: #f8f9ff; font-size: 1em; margin-top: 8px; }

/* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ† */
.candidate-list { margin-top: 10px; background: #f8f9ff; border: 2px solid #e0e7ff; border-radius: 14px; max-height: 320px; overflow-y: auto; padding: 8px; }
.candidate-item { background: #fff; border: 1px solid #e8ecff; padding: 10px; border-radius: 12px; margin-bottom: 9px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; border-left: 4px solid #667eea; min-height: 47px; transition: 0.3s; }
.candidate-item:hover { background: #f0f4ff; }
.candidate-item.selected { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; border-left-color: #fff; }
.c-left { display: flex; align-items: center; gap: 10px; flex: 1; }
.num-circle { width: 32px; height: 32px; border-radius: 50%; background: #667eea; color: #fff; display: flex; align-items: center; justify-content: center; font-weight: 900; }
.candidate-item.selected .num-circle { background: #fff; color: #667eea; }
.c-right { display: flex; align-items: center; gap: 10px; }
input[type="checkbox"] { width: 22px; height: 22px; accent-color: #667eea; }

/* Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„Ø®ÙŠØ§Ø±Ø§Øª */
.sec-box { margin-top: 13px; background: #f5f7ff; border: 2px solid #e0e7ff; border-radius: 12px; padding: 12px; }
.radio-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.radio-item { display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; background: #fff; border-radius: 10px; border: 2px solid #e0e7ff; }
.radio-item.selected { background: #667eea; color: #fff; border-color: #667eea; }
.radio-item input { width: 18px; height: 18px; accent-color: #667eea; }
.btn-row { display: flex; gap: 10px; margin-top: 23px; }
button { flex: 1; padding: 13px; border: none; border-radius: 12px; cursor: pointer; font-weight: 700; font-size: 1.03em; transition: all 0.3s; }
.btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; }
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); }
.btn-reset { background: #e0e7ff; color: #667eea; }

/* Ø²Ø± Ø§Ù„Ø±ÙØ¹ */
.action-btn { width: 100%; margin-top: 15px; padding: 13px; background: linear-gradient(135deg, #4c28d3 0%, #7d45ff 100%); color: #fff; font-weight: 700; border-radius: 12px; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; }
.action-btn.success { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); pointer-events: none; }

/* Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ */
.msg-warn, .msg-confirm { display: none; margin-top: 12px; padding: 11px; border-radius: 10px; text-align: center; font-weight: 700; }
.msg-warn { background: #ffebee; color: #c62828; }
.msg-confirm { background: #e8f5e9; color: #2e7d32; }
.sig { text-align: left; margin-top: 17px; color: #999; font-style: italic; font-size: 0.82em; }
.sig a { color: #1e3c72; font-weight: 900; text-decoration: underline; }

/* Ø²Ø± Ø§Ù„Ø®Ø±ÙˆØ¬ */
.logout-btn { position: fixed; top: 20px; left: 20px; background: #ff6b6b; color: #fff; padding: 10px 20px; border-radius: 10px; cursor: pointer; border:none; font-weight:bold; z-index: 100; }

/* Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø© */
#preview-container { margin-top: 15px; display: none; text-align: center; }
#preview-img { max-width: 100%; border-radius: 10px; border: 2px solid #4caf50; padding: 5px; background: #fff; }
</style>
</head>
<body>

<button class="logout-btn hidden" id="logout-btn" onclick="location.reload()">Ø®Ø±ÙˆØ¬</button>

<div id="password-modal">
  <div class="pass-box">
    <div class="pass-title">Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ù†ØªØ®Ø§Ø¨ÙŠ</div>
    <div class="pass-row" style="margin-top:20px;">
      <input type="password" id="password-input" class="pass-input" placeholder="Ø§Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ (200200)" autocomplete="off">
    </div>
    <button class="pass-btn" onclick="checkPass()">Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù†Ø¸Ø§Ù…</button>
    <div id="pw-err" class="pass-err">ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø©</div>
  </div>
</div>

<div class="container hidden" id="main-container">
  <h2 id="welcome-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØµÙˆÙŠØª</h2>
  
  <div class="committee-info">
    <div class="committee-name" id="committee-name-display">Ø§Ù„Ù„Ø¬Ù†Ø© Ø§Ù„Ø¹Ø§Ù…Ø©</div>
    <div class="committee-address" id="committee-address-display">Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± (Offline)</div>
  </div>
  
  <form id="vote-form">
    <label>Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø®Ø¨:</label>
    <input type="text" id="voter-name" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø®Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
    
    <label>Ø§Ø®ØªØ± Ù…Ø±Ø´Ø­ÙŠÙ† Ø§Ø«Ù†ÙŠÙ† (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ):</label>
    <div class="candidate-list" id="candidate-list"></div>
    
    <div class="sec-box">
      <span class="sec-title" style="color:#667eea; font-weight:bold; display:block; margin-bottom:10px;">Ø­Ø§Ù„Ø© Ø§Ù„ØµÙˆØª:</span>
      <div class="radio-group">
        <label class="radio-item">
          <input type="radio" name="vvalid" value="ØµØ­ÙŠØ­">
          <span>âœ“ ØµØ­ÙŠØ­</span>
        </label>
        <label class="radio-item">
          <input type="radio" name="vvalid" value="Ø¨Ø§Ø·Ù„">
          <span>âœ— Ø¨Ø§Ø·Ù„</span>
        </label>
      </div>
    </div>
    
    <div class="btn-row">
      <button type="submit" class="btn-primary">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØµÙˆÙŠØª</button>
      <button type="reset" class="btn-reset" onclick="resetStyle()">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
    </div>
    
    <div id="msg-warn" class="msg-warn"></div>
    <div id="msg-confirm" class="msg-confirm"></div>
  </form>

  <div style="border-top: 1px solid #eee; margin-top: 20px; padding-top: 10px;">
    <input type="file" id="file-upload" accept="image/*" style="display: none;" onchange="handleFileUpload(this)">
    <button class="action-btn" id="upload-btn" onclick="document.getElementById('file-upload').click()">
      <span id="upload-text">Ø±ÙØ¹ Ù…Ø­Ø¶Ø± Ø§Ù„Ù„Ø¬Ù†Ø© ğŸ“„</span>
    </button>
    
    <div id="preview-container">
      <div style="font-size:0.9em; color:#2e7d32; margin-bottom:5px; font-weight:bold;">ØªÙ… Ø¥Ø±ÙØ§Ù‚ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­:</div>
      <img id="preview-img" src="" alt="Preview">
    </div>
  </div>

  <div class="sig">
    ØªÙ… Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø¨ÙˆØ§Ø³Ø·Ø©
    <a href="#">Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ù…Ø¯ Ø­Ù…Ø§Ø¯</a>
  </div>
</div>

<script>
// 1. Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ†
const candidates = [
  ["1", "Ø§ÙŠÙ‡Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø¯Ù‡", "ğŸ‘‘"], ["2", "Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙ…Ø§Ù†Ù‰", "ğŸ"], ["3", "Ø£Ø­Ù…Ø¯ Ø§Ù„Ø­Ø¯ÙŠØ¯Ù‰", "ğŸ¦"],
  ["4", "Ø¹Ø§Ø¯Ù„ Ø§Ù„Ø¬ÙŠØ§Ø±", "ğŸ¦…"], ["5", "Ø§Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø³Ù…Ø±Ù‡", "ğŸ’£"], ["6", "ÙˆÙ„ÙŠØ¯ ØªÙŠØ³ÙŠØ± Ø§Ù„Ø§Ù…ÙŠØ±", "ğŸŠ"],
  ["7", "ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¹ÙŠØ³ÙˆÙ‰", "ğŸŒ€"], ["8", "Ø§Ù„Ø¨Ø¯ÙˆÙ‰ Ø¬Ù…ÙŠØ²", "ğŸ‹"], ["9", "Ø§Ø­Ù…Ø¯ Ø§Ù„Ø±ÙŠØ³", "ğŸ¦‚"],
  ["10", "Ø£Ø­Ù…Ø¯ Ø¹ÙˆÙ", "âœ‹"], ["11", "Ø­Ø³Ù† Ø§Ù„Ù…Ù„Ù‡Ø§Ø·", "ğŸŒ¿"], ["12", "Ø¹Ù…Ø±Ùˆ Ù…Ø­Ù…Ø¯ Ø¨Ø­ÙŠØ±Ù‰", "ğŸšŒ"],
  ["13", "Ø§Ù„Ø³ÙŠØ¯ Ø·Ù…Ø§Ù†", "ğŸ”«"], ["14", "Ù…Ø­Ù…Ø¯ Ø¯Ù†Ø¯Ù†", "ğŸš"], ["15", "Ù…Ø¬Ø¯Ù‰ Ø§Ù„Ø£Ù…ÙŠØ±", "ğŸ–Š"]
];

// 2. ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
const listBox = document.getElementById("candidate-list");
candidates.forEach((c) => {
  const item = document.createElement("div");
  item.className = "candidate-item";
  const checkbox = document.createElement("input");
  checkbox.type = "checkbox";
  checkbox.value = c[1];
  checkbox.className = "candidate-checkbox";
  
  item.innerHTML = `<div class="c-left"><div class="num-circle">${c[0]}</div><div class="c-name" style="font-weight:bold;">${c[1]}</div></div><div class="c-right"><span style="font-size:1.5em">${c[2]}</span></div>`;
  item.appendChild(checkbox);
  
  item.addEventListener("click", (e) => {
    if (e.target !== checkbox) checkbox.checked = !checkbox.checked;
    checkLimit();
    updateStyle();
  });
  
  checkbox.addEventListener("change", () => { checkLimit(); updateStyle(); });
  listBox.appendChild(item);
});

// 3. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±
function checkPass() {
  const val = document.getElementById("password-input").value.trim();
  const err = document.getElementById("pw-err");

  if (val === "200200") {
    document.getElementById("password-modal").classList.add("hidden");
    document.getElementById("main-container").classList.remove("hidden");
    document.getElementById("logout-btn").classList.remove("hidden");

    // Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©
    let currentCount = parseInt(localStorage.getItem("site_visitors_count") || "0");
    localStorage.setItem("site_visitors_count", currentCount + 1);
    localStorage.setItem("new_login_trigger", Date.now() + Math.random());

  } else {
    err.style.display = "block";
    setTimeout(() => err.style.display = "none", 2000);
  }
}

document.getElementById("password-input").addEventListener("keypress", (e) => {
  if(e.key === "Enter") checkPass();
});

// 4. ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØµÙˆÙŠØª
function updateStyle() {
  document.querySelectorAll(".candidate-item").forEach((item) => {
    if (item.querySelector("input[type='checkbox']").checked) item.classList.add("selected");
    else item.classList.remove("selected");
  });
}

function resetStyle() {
  setTimeout(updateStyle, 50);
  document.querySelectorAll(".radio-item").forEach(item => item.classList.remove("selected"));
  // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø²Ø± Ø§Ù„Ø±ÙØ¹
  resetUploadButton();
}

function checkLimit() {
  const sel = document.querySelectorAll('.candidate-checkbox:checked');
  if (sel.length > 2) {
    sel[sel.length - 1].checked = false;
    showWarn("ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø±Ø´Ø­ÙŠÙ† Ø§Ø«Ù†ÙŠÙ† ÙÙ‚Ø·");
  }
}

document.querySelectorAll("input[type='radio']").forEach(radio => {
  radio.addEventListener("change", function() {
    document.querySelectorAll(".radio-item").forEach(item => item.classList.remove("selected"));
    this.closest(".radio-item").classList.add("selected");
  });
});

document.getElementById("vote-form").addEventListener("submit", function(e) {
  e.preventDefault();
  const sel = document.querySelectorAll('.candidate-checkbox:checked');
  const val = document.querySelector('input[name="vvalid"]:checked');

  if (sel.length !== 2) return showWarn("ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø±Ø´Ø­ÙŠÙ† Ø§Ø«Ù†ÙŠÙ† Ø¨Ø§Ù„Ø¶Ø¨Ø·");
  if (!val) return showWarn("Ø§Ø®ØªØ± Ø­Ø§Ù„Ø© Ø§Ù„ØµÙˆØª");

  showConfirm("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØµÙˆÙŠØª (Ù…Ø­Ù„ÙŠØ§Ù‹) Ø¨Ù†Ø¬Ø§Ø­! âœ…");
  
  setTimeout(() => {
    document.getElementById("vote-form").reset();
    resetStyle();
  }, 1500);
});

// --- Ø¯Ø§Ù„Ø© Ù…Ø­Ø§ÙƒØ§Ø© Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù (Ø¬Ø¯ÙŠØ¯) ---
function handleFileUpload(input) {
  if (input.files && input.files[0]) {
    const btn = document.getElementById("upload-btn");
    const btnText = document.getElementById("upload-text");
    
    // ØªØºÙŠÙŠØ± Ø§Ù„Ø²Ø± Ù„ÙˆØ¶Ø¹ "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„"
    btnText.innerText = "Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©... â³";
    btn.style.opacity = "0.7";
    
    // Ù…Ø­Ø§ÙƒØ§Ø© ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± (Ø«Ø§Ù†ÙŠØ© ÙˆÙ†ØµÙ)
    setTimeout(() => {
      // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
      const reader = new FileReader();
      reader.onload = function(e) {
        document.getElementById('preview-img').src = e.target.result;
        document.getElementById('preview-container').style.display = 'block';
      }
      reader.readAsDataURL(input.files[0]);

      // ØªØºÙŠÙŠØ± Ø´ÙƒÙ„ Ø§Ù„Ø²Ø± Ù„Ù„Ù†Ø¬Ø§Ø­
      btn.classList.add("success");
      btnText.innerText = "âœ” ØªÙ… Ø±ÙØ¹ Ø§Ù„Ù…Ø­Ø¶Ø± Ø¨Ù†Ø¬Ø§Ø­";
      btn.style.opacity = "1";
      
      showConfirm("ØªÙ… Ø­ÙØ¸ ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­Ø¶Ø± Ù…Ø¤Ù‚ØªØ§Ù‹ âœ…");
    }, 1500);
  }
}

function resetUploadButton() {
  const btn = document.getElementById("upload-btn");
  const btnText = document.getElementById("upload-text");
  const preview = document.getElementById("preview-container");
  const input = document.getElementById("file-upload");
  
  btn.classList.remove("success");
  btnText.innerText = "Ø±ÙØ¹ Ù…Ø­Ø¶Ø± Ø§Ù„Ù„Ø¬Ù†Ø© ğŸ“„";
  preview.style.display = "none";
  input.value = ""; 
}

function showWarn(msg) {
  const el = document.getElementById("msg-warn");
  el.textContent = msg;
  el.style.display = "block";
  setTimeout(() => el.style.display = "none", 2500);
}

function showConfirm(msg) {
  const el = document.getElementById("msg-confirm");
  el.textContent = msg;
  el.style.display = "block";
  setTimeout(() => el.style.display = "none", 3000);
}
</script>
</body>
</html>
